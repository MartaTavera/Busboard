while (badResponse) {
  try {
     prompt
     api call
     if response status code !== 200 throw error
     else badResponse = false
}
catch (error) {
}
}